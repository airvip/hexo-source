---
title: Php打乱二维索引数组顺序
date: 2018-01-24 10:16:22
tags: 
    - Php
---

> 这个世界上有无法赎清的罪,但是,却没有不能去爱的人啊。

有时候我们需要对获取到的索引数组数据随机打乱顺序，在显示数据时有一种乱序的感觉，增加用户的体验感，今天就来测试下 php 应该如何处理。

<!-- more -->

毫无疑问，我们已经知道 php 中的 shuffle 函数只能打乱一维索引数组，有时候我们还需要对二维甚至多维索引数组进行打乱，那应该如何处理呢？

# 什么是数组

数组是特殊的变量，它可以同时保存一个以上的值。
数组能够在单一变量名中存储许多值，并且您能够通过引用下标号来访问某个值。

数组示例
``` php
<?php
$arr1 = [0,1,2,3];
$arr2 = ['阿尔维奇', '嘻嘻', 'PHP']; 
?>
```

在 PHP 中，有三种数组类型：
* 索引数组 - 带有数字索引的数组 (示例中的两个都是索引数组)
* 关联数组 - 带有指定键的数组
* 多维数组 - 包含一个或多个数组的数组

# 打乱一维索引数组

使用 php 提供的函数打乱一维索引数组
``` php
$arr1 = [0,1,2,3]; // 原一维索引数组
shuffle($arr1); // 打乱一维索引数组
print_r($arr1); // 打印打乱后的数组
// 结果如下
Array
(
    [0] => 1
    [1] => 0
    [2] => 3
    [3] => 2
)
```

# 打乱二维索引数组

我们需要借助我们定义的函数来打乱二维数组
``` php
function assoc_shuffle($arr){
    if(!is_array($arr)) return $arr;

    $keys = array_keys($arr); // 获取索引数组
    shuffle($keys);
    $random = [];
    foreach ($keys as $key=>$val)
        $random[$key] = $arr[$val];

    return $random;
}
// 原二维索引数组
$arr2 = [
    [
        'name' => '阿尔维奇0',
        'age' => 0
    ],
    [
        'name' => '阿尔维奇1',
        'age' => 1
    ],
    [
        'name' => '阿尔维奇2',
        'age' => 2
    ],
    [
        'name' => '阿尔维奇3',
        'age' => 3
    ]
];
// 打印打乱后的数组
Array
(
    [0] => Array
        (
            [name] => 阿尔维奇2
            [age] => 2
        )

    [1] => Array
        (
            [name] => 阿尔维奇1
            [age] => 1
        )

    [2] => Array
        (
            [name] => 阿尔维奇3
            [age] => 3
        )

    [3] => Array
        (
            [name] => 阿尔维奇0
            [age] => 0
        )
)
```